{% extends "wagtailadmin/base.html" %}
{% load static %}{% load i18n grp_tags %}
{% load wagtailadmin_tags wagtailcore_tags i18n %}

{% block extra_css %}
<link href="{% static "grappelli/jquery/ui/jquery-ui.min.css" %}" rel="stylesheet" type="text/css" media="screen" />
<link href="{% static "grappelli/stylesheets/screen.css" %}" rel="stylesheet" type="text/css" media="all" />
{% if LANGUAGE_BIDI %}
    <link href="{% static "grappelli/stylesheets/mueller/grid/output-rtl.css" %}" rel="stylesheet" type="text/css" media="screen" />
    <link href="{% block stylesheet_rtl %}{% static "grappelli/stylesheets/rtl.css" %}{% endblock %}" rel="stylesheet" type="text/css" media="screen" />
{% else %}
    <link href="{% static "grappelli/stylesheets/mueller/grid/output.css" %}" rel="stylesheet" type="text/css" media="screen" />
{% endif %}
{% block extrastyle %}{% endblock %}
<style>
.label, label {
    width: 100%;
}
header, header a {
    color: inherit;
}
header {
    background-color: inherit;
}
header h1, header h2 {
    color: inherit;
}
input[type=checkbox]:before {
    content: inherit;
}
.halloeditor, .tagit, input:not([type=submit]), select, textarea {
    width: 100%;
    appearance: inherit;
}

header#grp-header {
    z-index: 50;
}

table.grp-table.grp-sortable thead th.sortable {
    position: relative;
    z-index: 50;
}

.nav-search {
    font-family: Open Sans,Arial,sans-serif;
    font-size: 85%;
}

#menu-search-q {
    padding: .8em 2.5em .8em 1em;
    height: auto;
    font-size: 1em;
    background: inherit;
    border-radius: 0px;
}

select {
    width: auto;
}

.grp-fixed-footer {
    left: 200px;
    width: 85vw;
}
</style>
{% endblock %}

{% block furniture %}
    <aside class="nav-wrapper" data-nav-primary>
        <div class="inner">
            <a href="{% url 'wagtailadmin_home' %}" class="logo" aria-label="{% trans 'Dashboard' %}">
                {% block branding_logo %}
                    {# Mobile-only logo: #}
                    <div class="wagtail-logo-container__mobile u-hidden@sm">
                        <img class="wagtail-logo wagtail-logo__full" src="{% versioned_static 'wagtailadmin/images/wagtail-logo.svg' %}" alt="" width="80" />
                    </div>

                    {# Desktop logo (animated): #}
                    {% include "wagtailadmin/shared/animated_logo.html" %}
                {% endblock %}
                <span class="u-hidden@sm">{% trans "Dashboard" %}</span>
            </a>

            {% menu_search %}
            {% main_nav %}

        </div>
        <div class="explorer__wrapper" data-explorer-menu></div>
    </aside>

    <main class="content-wrapper" role="main" id="main">
        <div class="content">
            <div id="nav-toggle" class="nav-toggle icon text-replace">{% trans "Menu" %}</div>
            
            <!-- from Grappelli -->
            <div id="container" class="grp-container">

                {% block header %}
                <!-- HEADER -->
                <header id="grp-header" class="{% block header-class %}{% endblock %}">
                    {% if not is_popup %}
                        {% block navigation %}
                            <!-- NAVIGATION -->
                            <div id="grp-navigation">
                                {% block branding %}{% endblock %}
                                {% block admin_title %}
                                    <h1 id="grp-admin-title">
                                        {% trans "Django administration" as vanilla_site_header %}
                                        {% if site_header and site_header != vanilla_site_header %}
                                            {{ site_header|safe }}
                                        {% elif grappelli_admin_title %}
                                            {{ grappelli_admin_title }}
                                        {% else %}
                                            {% get_admin_title %}
                                        {% endif %}
                                    </h1>
                                {% endblock %}
                                {% block user-tools %}
                                    {% if user.is_authenticated and user.is_staff %}
                                        <ul id="grp-user-tools">
                                            <!-- Userlinks -->
                                            {% block userlinks %}
                                                <!-- Username -->
                                                <li class="grp-user-options-container grp-collapse grp-closed {% if request.session.original_user %}grp-switch-user-is-target{% endif %}">
                                                    <a href="javascript://" class="user-options-handler grp-collapse-handler {% if request.session.original_user %}grp-switch-user-is-target{% else %}grp-switch-user-is-original{% endif %}">{% firstof user.get_short_name user.get_username %}</a>
                                                    <ul class="grp-user-options">
                                                        <!-- Change Password -->
                                                        {% if user.has_usable_password %}
                                                            <li><a href="{% url 'admin:password_change' %}" class="grp-change-password">{% trans 'Change password' %}</a></li>
                                                        {% endif %}
                                                        <!-- Logout -->
                                                        <li><a href="{% url 'admin:logout' %}" class="grp-logout">{% trans 'Log out' %}</a></li>
                                                        <!-- Switch -->
                                                        {% switch_user_dropdown %}
                                                    </ul>
                                                </li>
                                                <!-- Site URL -->
                                                {% if site_url %}
                                                    <li><a href="{{ site_url }}">{% trans 'View site' %}</a></li>
                                                {% endif %}
                                                <!-- Documentation -->
                                                {% url 'django-admindocs-docroot' as docsroot %}
                                                {% if docsroot %}
                                                    <li><a href="{{ docsroot }}">{% trans 'Documentation' %}</a></li>
                                                {% endif %}
                                            {% endblock %}
                                        </ul>
                                    {% endif %}
                                {% endblock %}
                                <!-- Nav-Global -->
                                {% block nav-global %}{% endblock %}
                            </div>
                        {% endblock %}

                        {% block context-navigation %}
                            <!-- CONTEXT NAVIGATION -->
                            <div id="grp-context-navigation">
                                <nav id="grp-breadcrumbs" class="{% block breadcrumbs-class %}{% endblock %}">
                                    <header style="display:none"><h1>Breadcrumbs</h1></header>
                                    {% block breadcrumbs %}
                                        <ul>
                                            <li><a href="{% url 'admin:index' %}">{% trans 'Home' %}</a></li>
                                            {% if title %}
                                                <li> &rsaquo; {{ title }}</li>
                                            {% endif %}
                                        </ul>
                                    {% endblock %}
                                </nav>
                                <nav id="grp-page-tools">
                                    <header style="display:none"><h1>Page Tools</h1></header>
                                    {% block page-tools %}{% endblock %}
                                </nav>
                            </div>
                        {% endblock %}

                    {% endif %}
                </header>
                {% endblock %}
                <article id="grp-content" class="{% block content-class %}{% endblock %}">

                    <!-- MESSAGES -->
                    {% block messages %}
                        {% if messages %}
                            <ul class="grp-messagelist">
                                <!-- NOTE: no message|capfirst by purpose, because it does not work in some languages -->
                                {% for message in messages %}
                                    <li{% if message.tags %} class="grp-{{ message.tags }}"{% endif %}>{{ message }}</li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    {% endblock %}

                    <!-- CONTENT TITLE -->
                    <header id="grp-content-title">
                        {% block pretitle %}{% endblock %}
                        {% block content_title %}{% if title %}<h1>{{ title }}</h1>{% endif %}{% endblock %}
                        {% block object-tools %}{% endblock %}
                    </header>

                    <!-- CONTENT-CONTAINER -->
                    <div id="grp-content-container">
                        {% block content %}
                            {{ content }}
                            {% block filters %}{% endblock %}
                        {% endblock %}
                    </div>
                </article>

            <!-- FOOTER -->
            {% block footer %}{% endblock %}

            </div>
        </div>
    </main>
{% endblock %}

{% block js %}
    {{ block.super }}

    <script type="text/javascript">window.__admin_media_prefix__ = "{% filter escapejs %}{% static "grappelli/" %}{% endfilter %}";</script>
    <script type="text/javascript">window.__admin_utc_offset__ = "{% filter escapejs %}{% now "Z" %}{% endfilter %}";</script>
    <script type="text/javascript" charset="utf-8">
        // GLOBALS
        var grappelli = {},
            ADMIN_URL = "{% url 'admin:index' %}",
            MODEL_URL_ARRAY = {% if user.is_staff %}{% get_content_types %}{% else %}[]{% endif %},
            DATE_FORMAT = "{% get_date_format %}",
            TIME_FORMAT = "{% get_time_format %}",
            DATETIME_FORMAT = "{% get_datetime_format %}";
    </script>
    <!-- jQuery, jQuery-UI -->
    <script src="{% static "grappelli/jquery/jquery.min.js" %}" type="text/javascript"></script>
    <script src="{% static "grappelli/jquery/jquery-migrate-3.0.1.min.js" %}" type="text/javascript"></script>
    <script src="{% static "grappelli/jquery/ui/jquery-ui.min.js" %}" type="text/javascript"></script>
    {% if debug %}
        <!-- Grappelli Main JS -->
        <script src="{% static "grappelli/js/grappelli.js" %}" type="text/javascript"></script>
        <!-- Grappelli jQuery Plugins, Widgets -->
        <script src="{% static "grappelli/js/jquery.grp_collapsible.js" %}" type="text/javascript"></script>
        <script src="{% static "grappelli/js/jquery.grp_collapsible_group.js" %}" type="text/javascript"></script>
        <script src="{% static "grappelli/js/jquery.grp_timepicker.js" %}" type="text/javascript"></script>
        <script src="{% static "grappelli/js/jquery.grp_related_fk.js" %}" type="text/javascript"></script>
        <script src="{% static "grappelli/js/jquery.grp_related_m2m.js" %}" type="text/javascript"></script>
        <script src="{% static "grappelli/js/jquery.grp_related_generic.js" %}" type="text/javascript"></script>
        <script src="{% static "grappelli/js/jquery.grp_autocomplete_fk.js" %}" type="text/javascript"></script>
        <script src="{% static "grappelli/js/jquery.grp_autocomplete_m2m.js" %}" type="text/javascript"></script>
        <script src="{% static "grappelli/js/jquery.grp_autocomplete_generic.js" %}" type="text/javascript"></script>
        <script src="{% static "grappelli/js/jquery.grp_inline.js" %}" type="text/javascript"></script>
    {% else %}
        <!-- Grappelli Minified -->
        <script src="{% static "grappelli/js/grappelli.min.js" %}" type="text/javascript"></script>
    {% endif %}
    <script type="text/javascript" charset="utf-8">
        (function($) {
            $(document).ready(function() {
                $("#grp-navigation .grp-collapse").grp_collapsible();
            });
        })(grp.jQuery);
    </script>
    {% comment %} dont forget to add javascripts block since all grappelli template extend it {% endcomment %}
    {% block javascripts %} {% endblock %} 
 {% endblock %}